<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>海廢學</title>
<link rel="stylesheet" href="style.css">
<style>
  main { padding: 20px; }
  .question-container { display: none; }
  .active { display: block; }
  .result { font-weight:bold; margin-top:12px; font-size:18px; }
  button.option { margin:8px; padding:10px 16px; border-radius:8px; border:none; cursor:pointer; background:#2a7b6f; color:#fff; }
  button.option:disabled { opacity:0.6; cursor:default; }
  #finish { margin-top:24px; }

  /* 圖片容器 */
  .img-box {
    width: 120px;
    height: 120px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 6px;
    border-radius: 8px;
    border: 2px solid #ddd;
    background-color: #fff;
  }

  .img-box img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  /* 第二題圖片容器 */
  #q2image .img-box { margin-top: 12px; }
</style>
</head>
<body>
<header>
<h2>海廢學</h2>
<button class="menu-button" onclick="toggleMenu()">☰</button>
<nav id="menu">
<a href="index.html"> 首頁</a>
<a href="game.html"> 小遊戲</a>
<a href="about.html"> 關於</a>
<a href="learn.html"> 知識</a>
</nav>
</header>

<main>
<!-- 第一題 -->
<div class="question-container active" id="q1">
<h3>第一題（分辨紙與紙容器）：下列哪幾個是紙容器？</h3>
<div>
  <div class="img-box"><img src="圖片庫/1.png" alt="1"></div>
  <div class="img-box"><img src="圖片庫/2.png" alt="2"></div>
  <div class="img-box"><img src="圖片庫/3.png" alt="3"></div>
  <div class="img-box"><img src="圖片庫/4.png" alt="4"></div>
  <div class="img-box"><img src="圖片庫/5.png" alt="5"></div>
</div>
<div style="margin-top:12px;">
  <button class="option" onclick="selectOption(1, '1')">選項一：123</button>
  <button class="option" onclick="selectOption(1, '2')">選項二：13</button>
  <button class="option" onclick="selectOption(1, '3')">選項三：245</button>
</div>
<div id="result1" class="result"></div>
<button id="next1" class="option" style="display:none; background:#4caf50;" onclick="goToQuestion(2)">下一題 ➜</button>
</div>

<!-- 第二題 -->
<div class="question-container" id="q2">
<h3>第二題：請選擇哪個排列順序是對的？</h3>
<div>
  <button class="option" onclick="selectOption(2,'1')">選項一：疊>分>清</button>
  <button class="option" onclick="selectOption(2,'2')">選項二：清>疊>分</button>
  <button class="option" onclick="selectOption(2,'3')">選項三：清>分>疊</button>
</div>
<div id="result2" class="result"></div>
<div id="q2image" style="margin-top:12px;"></div>
<button id="next2" class="option" style="display:none; background:#4caf50;" onclick="goToQuestion(3)">下一題 ➜</button>
</div>

<!-- 第三題 -->
<div class="question-container" id="q3">
<h3>第三題（分解重製）：下列那一個選項是必須與紙容器分開後才能進行回收？</h3>
<div>
  <button class="option" onclick="selectOption(3,'1')">選項一：淋膜</button>
  <button class="option" onclick="selectOption(3,'2')">選項二：金屬</button>
  <button class="option" onclick="selectOption(3,'3')">選項三：保麗龍</button>
</div>
<div id="result3" class="result"></div>
<button id="next3" class="option" style="display:none; background:#4caf50;" onclick="finishQuiz()">完成並觀看解說 ➜</button>
</div>

<!-- 完成 / 重新挑戰 -->
<div id="finish" style="display:none;">
<h3>🎉 恭喜完成所有題目</h3>
<p class="small">你可以按下「重新挑戰」再來一次，或「觀看解說」了解更多。</p>
<button class="option" onclick="restartQuiz()">🔁 重新挑戰</button>
<button class="option" onclick="playExplanation()">▶ 播放解說</button>
</div>

<div id="videoWrap" style="display:none; margin-top:18px;">
<video id="explainVideo" width="560" controls>
  <source src="影片/animation.mp4" type="video/mp4">
  您的瀏覽器不支援影片播放。
</video>
</div>
</main>

<script>
function toggleMenu() {
  const menu = document.getElementById('menu');
  menu.style.display = (menu.style.display==='block')?'none':'block';
}

const correct={1:'3',2:'3',3:'1'};
const answered={1:false,2:false,3:false};

function selectOption(q,optKey){
  if(answered[q]) return;
  answered[q]=true;
  const resEl=document.getElementById('result'+q);
  if(optKey===correct[q]){resEl.textContent='✅ 答對了！';resEl.style.color='green';}
  else{resEl.textContent='❌ 答錯了！';resEl.style.color='red';}

  const qDiv=document.getElementById('q'+q);
  qDiv.querySelectorAll('button.option').forEach(b=>{
    if(!b.id.startsWith('next')) b.disabled=true;
  });

  const nextBtn=document.getElementById('next'+q);
  if(nextBtn) nextBtn.style.display='inline-block';

  if(q===2){
    const imgWrap=document.getElementById('q2image');
    imgWrap.innerHTML='<div class="img-box"><img src="圖片庫/q2.png" alt="清分疊示意"></div>';
  }
}

function goToQuestion(n){
  document.querySelectorAll('.question-container').forEach(div=>div.classList.remove('active'));
  document.getElementById('q'+n).classList.add('active');
}

function finishQuiz(){
  document.querySelectorAll('.question-container').forEach(div=>div.classList.remove('active'));
  document.getElementById('finish').style.display='block';
}

function restartQuiz(){
  for(let i=1;i<=3;i++) answered[i]=false;
  ['result1','result2','result3'].forEach(id=>document.getElementById(id).textContent='');
  document.getElementById('q2image').innerHTML='';
  document.querySelectorAll('button.option').forEach(b=>b.disabled=false);
  ['next1','next2','next3'].forEach(id=>document.getElementById(id).style.display='none');
  document.getElementById('finish').style.display='none';
  document.getElementById('videoWrap').style.display='none';
  const vid=document.getElementById('explainVideo'); if(vid){vid.pause();vid.currentTime=0;}
  goToQuestion(1);
}

function playExplanation(){
  document.getElementById('videoWrap').style.display='block';
  const vid=document.getElementById('explainVideo'); if(vid) vid.play();
}
</script>
</body>
</html>
